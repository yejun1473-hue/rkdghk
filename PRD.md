## 1. 프로젝트 개요
- **제품명:** 검 강화하기 (웹게임)
- **목표:** 단순하지만 중독성 있는 강화 시스템을 중심으로 한 클릭형 RPG 느낌의 웹게임. 0강 → 20강까지 검을 성장시키며 골드(G), 초코(C), 머니(M) 3중 화폐 경제를 체험하게 함.
- **플랫폼:** 웹 (PC/Mobile Responsive)
- **배포:** Render 사용. 프리티어 기준 웹 서비스 + 백엔드(Express 또는 FastAPI) 컨테이너, PostgreSQL 추가 인스턴스.
- **서버/인프라 준비물:**  
  - `.env` (DB URL, JWT/세션 키, 관리자 계정)  
  - `.env.example`, `.gitignore`, `Procfile` 또는 Render build/start 명령  
  - 헬스 체크 엔드포인트 및 기본 모니터링 로그  
- **백엔드:** PostgreSQL 기반. 핵심 테이블: `users`, `weapons`, `enhancement_attempts`, `currencies`, `hidden_weapons`.
- **프런트엔드:** React + Vite (제안). 상태관리는 Recoil/Zustand 중 택1. **핵심 언어는 JS/HTML/CSS**이며 모바일 퍼스트 레이아웃.

## 2. 주요 사용자 및 직함
| 이름 | 직함 | 개인키 |
| --- | --- | --- |
| 조예준 | GM | yj123234 |
| 박은찬 | BETA TESTER & Player | ecfir125 |
| 김동혁 | BETA TESTER & Player | dhsec394 |
| 정결 | Player | jg283913 |
| 이승준 | Player | sj283710 |
| 이정태 | Player | jtet0928 |
| 김산 | Player | sk228391 |

## 3. 핵심 기능 요약
1. **검 목록/선택:** 기본 검(0강)부터 20강까지 시각화. 각 검은 폴더만 먼저 생성(`assets/weapons/{level}`), 이미지 추후 추가.
2. **강화 시스템:**  
   - 강화 시 필요한 골드 차감, 성공/유지/파괴 확률 기반 결과 처리.  
   - 파괴 시 해당 검은 0강으로 초기화.  
   - 강화 이력 로그 저장 및 UI에 최근 5건 표시.  
   - **10강 이상 성공 시** 글로벌 알림: `"{playerName}가 [+{level}]강 {weaponName} 제작에 성공했습니다!"` 를 상단 배너/토스트로 송출.
3. **히든 무기 획득:** 기준 조건 충족 시 0강 히든 무기 지급. 이름만 지정, 이미지 폴더 `assets/hidden/{slug}` 생성.  
   - 제작자의 유골  
   - 크리스마스 검  
   - 진저브레드  
   - 금방 시들 것 같은 할인 꽃다발  
   - 작은 광선검  
   - 빵에 낀 의문의 소시지  
4. **경제 시스템:**  
   - 화폐: 골드(G), 초코(C), 머니(M).  
   - 환율: `120M = 1C = 120,000G` (따라서 `1M = 1,000G`).  
   - 상점에서 화폐 교환 가능 (수수료 없음).
5. **랭킹/리더보드:** 최고 강화 수치 및 누적 파괴 수 공개.
6. **주요 기능 정의:**  
   - **강화:** UI 메인 액션. 연속 시도, 결과 로그, 강화 재료 안내.  
   - **판매:** 현재 강화 단계별 판매 골드 회수. 성공/실패 후 즉시 판매 가능.  
   - **랭킹:** GM/전체/친구 필터, 최고 강화 수치·누적 파괴·히든 무기 보유량 기준.  
   - **출석체크:** 모바일 최적화 달력. 일자별 보상(골드/머니/소모품) 지급 및 누적 출석 보너스.  
   - **배틀:** 비동기 PvP(자동 계산). 공격/방어력은 강화 수치 기반, 단판 결과와 보상 분배.  
   - **프로필:** 닉네임, 직함, 지갑 잔액(G/C/M), 최근 배틀·강화 기록.

## 4. 강화 단계 밸런스 제안 _(GM이 추후 수정 예정)_
| 레벨 | 필요 골드(G) | 성공 % | 유지 % | 파괴 % | 판매 골드(G)(히든은 4배) |
| --- | --- | --- | --- | --- | --- |
| 0 → 1 | 10 | 100 | 0 | 0 | 10 |
| 1 → 2 | 20 | 95 | 3 | 2 | 30 |
| 2 → 3 | 50 | 90 | 7 | 3 | 90 |
| 3 → 4 | 100 | 85 | 10 | 5 | 250 |
| 4 → 5 | 500 | 80 | 10 | 10 | 1,000 |
| 5 → 6 | 1,500 | 65 | 22 | 13 | 2,500 |
| 6 → 7 | 5,000 | 60 | 24 | 16 | 10,000 |
| 7 → 8 | 10,000 | 55 | 26 | 19 | 25,000 |
| 8 → 9 | 50,000 | 50 | 28 | 22 | 37,500 |
| 9 → 10 | 65,000 | 45 | 30 | 25 | 85,500 |
| 10 → 11 | 82,000 | 38 | 32 | 30 | 100,000 |
| 11 → 12 | 101,000 | 32 | 33 | 35 | 300,000 |
| 12 → 13 | 150,000 | 27 | 33 | 40 | 500,500 |
| 13 → 14 | 250,000 | 22 | 33 | 45 | 1,600,500 |
| 14 → 15 | 500,000 | 18 | 32 | 50 | 2,750,000 |
| 15 → 16 | 750,000 | 15 | 30 | 55 | 4,050,500 |
| 16 → 17 | 1,000,000 | 12 | 28 | 60 | 6,500,500 |
| 17 → 18 | 1,250,000 | 10 | 25 | 65 | 10,973,000 |
| 18 → 19 | 2,000,000 | 8 | 22 | 70 | 50,082,000 |
| 19 → 20 | 3,000,000 | 5 | 20 | 75 | 1,000,000,000 |

> **노트:** 유지 확률은 레벨 변화 없음. 성공+유지+파괴=100%. 파괴 시 판매 골드 30% 차감 후 0강으로 리셋.  
> **추가:** 본 표는 초기 참고 수치이며 조예준 GM이 별도 지침으로 업데이트 예정.

## 5. 데이터/시스템 설계
- **User Table:** id, nickname, role(GM/Beta/Player), wallet(G/C/M), created_at.  
- **Weapon Table:** id, owner_id, current_level(0-20), type(normal/hidden), base_name, created_at, updated_at.  
- **Enhancement Attempts:** id, weapon_id, attempt_number, currency_spent, result(success/maintain/destroy), timestamp.  
- **Hidden Unlock Conditions:** rule json (예: 누적 파괴 10회, 특정 환율 교환 등).  
- **Security:** GM 전용 대시보드 접근 제어, CSRF 방어, rate limit(강화 3/s).  
  - 모든 플레이어에게 **8자리 개인키** 발급 (숫자+대문자 조합). 로그인 및 민감 동작에 2차 검증으로 사용.

## 6. UI/UX 요구사항
1. **메인 화면 (모바일 우선):**  
   - 중앙에 현재 검, 좌우 스와이프 제스처로 레벨 프리뷰.  
   - 강화 버튼, 필요 골드 표시, 성공/유지/파괴 확률 차트.  
2. **히든 무기 섹션:** 잠금 상태는 실루엣, 조건 달성 시 이름 공개.  
3. **경제 위젯:** 현재 보유 화폐, 환율 스와퍼(BTN). 모바일 하단 고정 플로팅 패널.  
4. **이벤트 피드:** 최근 강화 결과, GM 공지.  
5. **컬러/타이포 제안:** 다크 톤 배경(#0B0F1A) + 네온 골드 포인트. 타이포: `Pretendard` or `SUIT`.

## 7. 추가 요구사항
- 유저 액션 로깅 및 GM 분석 대시보드는 V2 범위로 정의.  
- 접근성: 모든 버튼에 키보드 포커스 스타일, ARIA 라벨.  
- 멀티랭 지원 대비하여 텍스트 리소스 분리(JSON).  
- 추후 모바일 앱 전환 용이성을 위해 API 문서화 (OpenAPI).
- Render 배포 시 HTTPS, WAF(Web Application Firewall) 옵션 검토.  
- 실시간 알림(10강 이상 성공) 송출용 SSE 또는 WebSocket 고려.

## 8. 일반 무기 이름
### 검 이름 (각각 +0강부터 +20강까지 차례로)
- 낡은 검, 새싹 검, 
- 낡은 검, 혼돈의 검, 
- 낡은 검, 피 묻은 검, 
- 낡은 검, 역병의 검, 
- 낡은 검, 희미한 축복의 검, 
- 낡은 검, 복수의 맹아, 
- 낡은 검, 서리 검, 
- 낡은 검, 축축한 검, 
- 낡은 검, 물든 검,
- 낡은 검, 철심 박힌 검, 
- 낡은 검, 여명의 검, 
- 낡은 검, 시간의 조각 검, 
- 낡은 검, 가벼운 검, 
### 몽둥이 이름 (각각 +0강부터 +20강까지 차례대로)
- 낡은 몽둥이